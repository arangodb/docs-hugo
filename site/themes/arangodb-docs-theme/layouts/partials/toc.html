<div class="toc-container">
  <a
  class="edit-page"
  aria-label=""
  href="https://github.com/arangodb/docs-hugo/edit/main/site/content/
    {{- with .File }}
      {{- $path := .Path }}
      {{- if and (strings.HasPrefix $path "arangodb/") (ne $path "arangodb/_index.md") }}
        {{- $splitPath := split $path "/" }}
        {{- $versionAlias := index $splitPath 1 }}
        {{- if or (eq $versionAlias "stable") (eq $versionAlias "devel") }}
          {{- $versionName := (index (where (index site.Data.versions "/arangodb/") "alias" $versionAlias) 0).name }}
          {{- $path = $path | replaceRE (printf "^arangodb/%s/" $versionAlias) (printf "arangodb/%s/" $versionName) }}
        {{- end }}
      {{- end }}
      {{- $path }}
    {{- end }}"
  target="_blank">
    <i class="fab fa-fw fa-github edit-page-icon"></i>
  </a>
  {{ if ge (.Page.Fragments.HeadingsMap | len) 2 }}
    <div class="toc">
      <div class="toc-content">
        <div class="toc-header"><p>On this page</p></div>
        <nav class="TableOfContents" >
          {{ template "nestedHeadline" dict "headings" .Page.Fragments.Headings "level" 1 }}
        </nav>
      </div>
    </div>
  {{ end }}
</div>

{{ define "nestedHeadline" }}
{{ $headings := .headings }}
{{ $level := .level | default 1 }}
{{ $maxLevel := page.Params.pageToc.maxHeadlineLevel | default 5 }}
{{ if le $level $maxLevel }}
  {{ range $h := $headings }}
    {{ with $h.Title }}<div class="level-{{ $level }}"><a href="#{{ $h.ID }}">{{ $h.Title | safeHTML }}</a></div>{{ end }}
    {{ template "nestedHeadline" dict "headings" $h.Headings "level" (add $level 1) }}
  {{ end }}
{{ end }}
{{ end }}