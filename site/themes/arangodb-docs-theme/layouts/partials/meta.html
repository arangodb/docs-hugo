<meta charset="utf-8">
{{- /* to avoid that user swiping to the left leaves a gap on the right side, we set minimum-scale, even if not advised to */}}
<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
{{- $gen := hugo.Generator }}
{{- $gen = replaceRE "\\s*/>$" ">" $gen }}
{{ $gen | safeHTML }}
{{- $pageDescription := .Description | default .Site.Params.description | markdownify | plainify }}
<meta itemprop="description" property="description" content="{{ $pageDescription }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ .Title | default .Site.Title | markdownify | plainify }}">
<meta property="og:type" content="website">
<meta property="og:description" content="{{ $pageDescription }}">
{{- with .Site.Params.author }}
<meta name="author" content="{{ . }}">
{{- end }}
{{- $versionShort := .Page.Store.Get "versionShort" }}
{{- $versionAlias := .Page.Store.Get "alias" }}
{{- if $versionShort -}}
  <meta name="docsearch:version" content="{{ $versionShort }}{{ if ne $versionShort $versionAlias }},{{ $versionAlias }}{{ end }}">
{{- else }}
  {{- $shortVersions := slice }}
  {{- $versions := index site.Data.versions "/arangodb/" }}
  {{- range $version := $versions }}
    {{- $shortVersions = $shortVersions | append $version.name }}
    {{- if ne $version.name $version.alias }}
      {{- $shortVersions = $shortVersions | append $version.alias }}
    {{- end }}
  {{- end -}}
  <meta name="docsearch:version" content="{{ delimit $shortVersions "," }}">
{{- end }}
{{- if (hasPrefix .Path "/arangodb/") }}
  {{- if or (.Page.Store.Get "deprecated") (.Page.Store.Get "inDevelopment") }}<meta name="robots" content="noindex">{{ end }}
  {{- if and (eq (.Page.Store.Get "alias") "stable") (not (hasPrefix .RelPermalink "/arangodb/stable/")) }}
    {{- $splitLink := split .RelPermalink "/" }}
    {{- $s := slice "/arangodb" "stable" }}
    {{- range $i, $e := $splitLink }}
      {{- if gt $i 2 }}{{ $s = $s | append $e }}{{ end }}
    {{- end }}
    <link rel="canonical" href="{{ delimit $s "/" }}">
  {{- else if and (eq (.Page.Store.Get "alias") "devel") (not (hasPrefix .RelPermalink "/arangodb/devel/")) }}
    {{- $splitLink := split .RelPermalink "/" }}
    {{- $s := slice "/arangodb" "devel" }}
    {{- range $i, $e := $splitLink }}
      {{- if gt $i 2 }}{{ $s = $s | append $e }}{{ end }}
    {{- end }}
    <link rel="canonical" href="{{ delimit $s "/" }}">
  {{- end }}
{{- end }}
