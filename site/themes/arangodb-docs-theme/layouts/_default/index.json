{{- $pages := slice }}
{{- range .Site.Pages }}
{{- if and .Title (or (ne (.Scratch.Get "relearnIsHiddenStem") true) (ne .Site.Params.disableSearchHiddenPages true) ) }}
{{ $headings := "" }}

{{ range .Page.Fragments.HeadingsMap}}
    {{ $headings = printf "%s\n%s" $headings .Title }}
{{ end }}

{{- $pages = $pages | append (dict "uri" .RelPermalink "title" .Title "headings" $headings "description" .Description "content" (.Plain | htmlUnescape)) }}
{{- end }}
{{- end }}
{{- $pages | jsonify (dict "indent" "  ") }}
