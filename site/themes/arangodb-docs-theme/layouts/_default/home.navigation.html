<div class="sidebar default-animation active">
  <div class="sidenav-container-flex">
    <div class="sidenav-navigation">
      <div class="content-wrapper highlightable">
        <ul class="topics{{ if .Site.Params.collapsibleMenu }} collapsible-menu{{ end }}">
          {{- template "section-tree-nav" dict "Pages" .Site.Sections }}
        </ul>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter"></div>
      </div>
    </div>
  </div>
  <button class="sidebar-toggle-navigation desktop-menu-toggle" onclick="showSidebarHandler();"></button>
</div>

{{- define "section-tree-nav" }}
  {{- $pages := .Pages }}
  {{- range $page := $pages.ByWeight }}
    {{- if $page.Pages }}
      {{- /* section (with child pages) */}}
      <li class="dd-item sect">
        <label class="closed"></label>{{- /*whitespace control */ -}}
        <a href="{{ .RelPermalink }}" class="toggle sect menu-link">
          <div class="menu-title">{{ .Params.menuTitle | markdownify }}</div>
        </a>
        {{ $isVersioned := eq $page.Path "/arangodb" }}
        {{ if $isVersioned }}
          {{ partial "version-selector.html" . }}
          {{ range $versionPage := $page.Pages }}
            <div class="version-menu version-{{ replace (index (split $versionPage.Path "/") 2) "." "_" }}">
              <ul class="submenu">
                {{- template "section-tree-nav" $versionPage }}
              </ul>
            </div>
          {{ end }}
        {{ else }}
        <ul class="submenu">
          {{- template "section-tree-nav" $page }}
        </ul>
        {{ end }}
      </li>
    {{- else }}
      {{- /* page (or section without children) */}}
      <li class="dd-item leaf">
        <a href="{{ .RelPermalink }}" class="menu-link">
          <div class="menu-title">{{ .Params.menuTitle | markdownify }}</div>
        </a>
      </li>
    {{- end }}
  {{- end }}
{{- end }}
