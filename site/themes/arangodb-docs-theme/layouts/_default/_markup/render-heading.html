{{- $ref := printf "%s#%s" page.RelPermalink .Anchor}}{{/* TODO: .Page instead of page? */}}
{{- $level := .Level }}
{{- if eq .Level 1 }}
  {{- warnf "Found illegal level 1 Header in '%v' -> '%v'" .Page.RelPermalink .Text }}
  {{- $level := 2 }}
{{- end }}
<h{{ $level }} id="{{ .Anchor | safeURL }}">{{ .Text | safeHTML }} <a href="{{ $ref | safeURL }}" class="header-link" onclick="copyURI(event)"><span></span><i class="fa fa-link"></i></a></h{{ $level }}>
{{- .Page.Scratch.Set "currentHeadline" .Text }}
